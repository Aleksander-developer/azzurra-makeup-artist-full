# FRONTEND: Build immagine Docker personalizzata
- name: 'gcr.io/cloud-builders/docker'
  id: 'build-frontend'
  args:
    - 'build'
    - '-t'
    - 'europe-west1-docker.pkg.dev/${PROJECT_ID}/azzurra-frontend-repo/azzurra-makeup-artist-frontend'
    - '-f'
    - 'azzurra-makeup-artist-fe/Dockerfile'
    - '.' # Docker context: radice del progetto

# FRONTEND: Deploy su Cloud Run
- name: 'gcr.io/google.com/cloudsdktool/cloud-sdk'
  id: 'deploy-frontend'
  entrypoint: gcloud
  args:
    - 'run'
    - 'deploy'
    - 'azzurra-frontend'
    - '--image'
    - 'europe-west1-docker.pkg.dev/${PROJECT_ID}/azzurra-frontend-repo/azzurra-makeup-artist-frontend'
    - '--platform'
    - 'managed'
    - '--region'
    - 'europe-west1'
    - '--allow-unauthenticated'
    - '--port'
    - '8080'
    - '--project'
    - '${PROJECT_ID}'